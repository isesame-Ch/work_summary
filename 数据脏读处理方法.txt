秒杀场景和数据脏读处理办法
秒杀脏读乐观锁西山2018-08-30 11:37:34
1、对于抢购场景，有一个原则，尽量不要让所有的请求都落到数据层，比如库存3K的手机，就只让3K个有效请求落到数据库里。

具体的实现方法可参考这篇文章：https://mp.weixin.qq.com/s/5aMN9SqaWa57rYGgtdAF_A



2、对于商品超卖的场景，可以使用redis的自增（incr）或者队列（spop...）等方法来处理。



3、如果是与数据库交互，可以增加一个version字段，用户就算同时请求到了一条数据，但是更新的时候只有当version++大于当前version才能更新成功，小于等于都相当于已经被抢购。（乐观锁解决方法）

具体实现方法可以参考这篇文章：https://blog.csdn.net/baoendemao/article/details/39829209